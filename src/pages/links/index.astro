---
import BackToTop from "@components/BackToTop.astro";
import BaseLayout from "@layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const links = (await getCollection("links")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

const title = "Links";
const desc = "Links to helpful web development tools and sites.";
---

<style>
  h1 {
    font-family: "M Plus Rounded 1c Reg";
  }
  p {
    margin-bottom: 2em;
  }
  ul {
    list-style-type: none;
    padding: unset;
    margin-bottom: 4em;
  }
  ul li {
    display: flex;
    flex-direction: column;
    margin: 0 0.25em 1em 0.25em;
  }
  .tag {
    color: var(--primary);
  }
  .tag, .data {
    font-size: 0.9em;
  }
  .link-tag {
    font-family: 'M Plus Rounded 1c Med', 'Atkinson', Monaco, Consolas, 'Andale Mono', 'Ubuntu Mono', monospace;
    background-color: var(--info);
    color: #000;
    border: 0;
    border-radius: 0.25em;
    padding: 4px 8px;
    font-weight: 600;
    font-size: 0.75em;
  }
  span a {
    border-bottom: 2px transparent;
  }
  span a:hover {
    color: var(--hover);
    border-bottom: 2px solid var(--hover);
  }
  @media screen and (max-width: 667px) {
    section {
      line-height: 1.2;
    }
    .tag {
      margin: 0.25em 0;
    }
  }
</style>
<BaseLayout title={title} description={desc}>
  <section>
    <h1>Links</h1>
    <hr />
    <p>
      Websites, self-hosted apps and other online tools that I like or find useful.
    </p>
    <ul>
      {
        links.map((link) => (
          <li>
            <span>
              <a href={link.data.url} target="_blank" data-umami-event={`links-${link.data.title}`}>
                {link.data.title}
              </a>
            </span>
            <span class="tag">Type: <span class="link-tag">{link.data.tag}</span></span>
            <span class="data">{link.data.description}</span>
          </li>
        ))
      }
    </ul>
    <p>
      <button class="edit">
        <span>
          <a 
          href={`https://github.com/fullmetalbrackets/blog/new/main/src/content/links`}
          target="_blank" data-umami-event="edit-links-gh">
            <img src="/assets/gh.svg"
              class="gh"
              loading="lazy"
              decoding="async"
              alt="Edit this page on GitHub"> <span>Edit on GitHub</span>
          </a>
        </span>
      </button>
    </p>
    <BackToTop />
  </section>
</BaseLayout>
