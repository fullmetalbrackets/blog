---
const posts = (await Astro.glob('../pages/blog/*.md')).sort(
	(a, b) => new Date(b.frontmatter.pubDate).valueOf() - new Date(a.frontmatter.pubDate).valueOf()
);
---

<style scoped>
	h2 {
		margin-top: 0;
	}
  span {
		font-size: 110%;
    line-height: 1.4;
	}
	.desc {
    line-height: 1.4;
		font-size: 90%;
	}
	ul {
		width: 85%;
	}
	li {
		display: inline-flex;
		flex-direction: column;
		margin: 0 2em 1em -1em;
		line-height: 1.2;
	}
	.recent-posts-line {
		margin: 1em 0 2em 0;
	}
	.posts-title {
		display: inline-flex;
		flex-direction: row;
		margin-top: 0.25em;
	}
	.posts-title a, .posts-title a:active, .posts-title a:visited {
		color: var(--primary);
	}
	.posts-title a:hover {
		color: var(--menu);
	}
	a button {
		background-color: var(--tags);
		color: #000;
		border-radius: 0.25em;
		cursor: pointer;
		font-weight: 600;
		padding: 4px 8px;
		text-decoration: none;
		text-overflow: ellipsis;
		-webkit-transition: all .10s ease-out;
		-moz-transition: all .10s ease-out;
		-o-transition: all .10s ease-out;
		transition: all .10s ease-out;
		margin: 0 0 0 1em;
		font-family: 'M Plus Rounded 1c Med';
	}
	@media (hover: hover) {
		a:hover button  {
			box-shadow: -4px -4px 0 #000;
			transform: translate(4px,4px);
		}
		a:hover button {
			outline-offset: 1px;
		}
	}
	@media (hover: none) {
		a:hover button {
			background-color: var(--menu);
		}
	}
  @media screen and (min-width: 200px) and (max-width: 667px) {
		main {
			margin: 0 10px;
		}
		span {
			font-size: 100%;
		}
		ul {
			width: 100%;
			margin: 0;
		}
		li {
			margin: 0 1em 2em -1em;
		}
		a button {
			font-size: 0.85em;
			margin: 0 0 0 1.2em;
		}
  }
</style>

<section>
	<h2>Recent Posts</h2>
	<hr class="recent-posts-line">
	{posts.slice(0, 3).map((post) => (
		<ul>
			<li class="posts-li">
				<div class="posts-dates">
					<time datetime={post.frontmatter.pubDate}>
						{new Date(post.frontmatter.pubDate).toLocaleDateString('en-us', {
							year: 'numeric',
							month: 'numeric',
							day: 'numeric',
						})}
					</time>
				</div>
				<div class="posts-title">
					<a href={post.url} rel="prefetch-intent">
						<span>{post.frontmatter.title}</span>
						<p class="desc">{post.frontmatter.description}</p>
					</a>
				</div>
			</li>
		</ul>
	))}
	<a href="/blog"><button>More Posts</button></a>
</section>